"use strict";(self["webpackChunkblog_frontend"]=self["webpackChunkblog_frontend"]||[]).push([[313],{2313:(e,r,t)=>{t.r(r),t.d(r,{default:()=>m});t(52675),t(89463),t(62010);var i=function(){var e=this,r=e._self._c;return r("div",{staticClass:"friends-page"},[r("div",{staticClass:"container"},[r("h1",[e._v("友情链接")]),r("div",{staticClass:"friends-intro"},[r("p",[e._v("这里是我的朋友们，他们都是很棒的博主，欢迎访问他们的网站！")]),r("el-button",{attrs:{type:"primary"},on:{click:function(r){e.dialogVisible=!0}}},[e._v("申请友链")])],1),r("div",{staticClass:"friends-grid"},e._l(e.friends,function(t,i){return r("div",{key:i,staticClass:"friend-card"},[r("div",{staticClass:"friend-avatar"},[r("img",{attrs:{src:t.avatar,alt:t.name}})]),r("div",{staticClass:"friend-info"},[r("h3",[e._v(e._s(t.name))]),r("p",[e._v(e._s(t.description))]),r("a",{staticClass:"friend-link",attrs:{href:t.url,target:"_blank"}},[r("i",{staticClass:"el-icon-link"}),e._v(" 访问 ")])])])}),0),r("el-dialog",{attrs:{title:"申请友链",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(r){e.dialogVisible=r}}},[r("el-form",{ref:"linkForm",attrs:{model:e.linkForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"网站名称",prop:"name"}},[r("el-input",{model:{value:e.linkForm.name,callback:function(r){e.$set(e.linkForm,"name",r)},expression:"linkForm.name"}})],1),r("el-form-item",{attrs:{label:"网站链接",prop:"url"}},[r("el-input",{model:{value:e.linkForm.url,callback:function(r){e.$set(e.linkForm,"url",r)},expression:"linkForm.url"}})],1),r("el-form-item",{attrs:{label:"网站描述",prop:"description"}},[r("el-input",{model:{value:e.linkForm.description,callback:function(r){e.$set(e.linkForm,"description",r)},expression:"linkForm.description"}})],1),r("el-form-item",{attrs:{label:"网站图标",prop:"avatar"}},[r("el-input",{model:{value:e.linkForm.avatar,callback:function(r){e.$set(e.linkForm,"avatar",r)},expression:"linkForm.avatar"}})],1),r("el-form-item",{attrs:{label:"联系方式",prop:"contact"}},[r("el-input",{attrs:{placeholder:"邮箱或其他联系方式"},model:{value:e.linkForm.contact,callback:function(r){e.$set(e.linkForm,"contact",r)},expression:"linkForm.contact"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(r){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submitLinkApplication}},[e._v("提 交")])],1)],1)],1)])},a=[],n=t(20908),l=t(30388),s=(t(62062),t(18111),t(61701),t(26099),t(31552));const o={name:"Friends",data:function(){return{dialogVisible:!1,linkForm:{name:"",url:"",description:"",avatar:"",contact:""},rules:{name:[{required:!0,message:"请输入网站名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],url:[{required:!0,message:"请输入网站链接",trigger:"blur"},{pattern:/^https?:\/\//,message:"请输入有效的URL",trigger:"blur"}],description:[{required:!0,message:"请输入网站描述",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],avatar:[{required:!0,message:"请输入网站图标链接",trigger:"blur"}],contact:[{required:!0,message:"请输入联系方式",trigger:"blur"}]},friends:[],loading:!1}},created:function(){this.fetchFriendLinks()},methods:{fetchFriendLinks:function(){var e=this;return(0,l.A)((0,n.A)().m(function r(){var t,i;return(0,n.A)().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,e.loading=!0,r.n=1,s.A.friendLink.getList();case 1:t=r.v,200===t.code&&(e.friends=t.data.map(function(e){return{id:e.id,name:e.name,description:e.description,avatar:e.avatar||"https://via.placeholder.com/80",url:e.url}})),r.n=3;break;case 2:r.p=2,i=r.v,console.error("获取友链列表失败:",i),e.$message.error("获取友链列表失败");case 3:return r.p=3,e.loading=!1,r.f(3);case 4:return r.a(2)}},r,null,[[0,2,3,4]])}))()},submitLinkApplication:function(){var e=this;this.$refs.linkForm.validate(function(){var r=(0,l.A)((0,n.A)().m(function r(t){var i,a;return(0,n.A)().w(function(r){while(1)switch(r.p=r.n){case 0:if(!t){r.n=5;break}return r.p=1,r.n=2,s.A.friendLink.add(e.linkForm);case 2:i=r.v,200===i.code&&(e.$message.success("友链申请提交成功，请等待审核！"),e.dialogVisible=!1,e.linkForm={name:"",url:"",description:"",avatar:"",contact:""},e.fetchFriendLinks()),r.n=4;break;case 3:r.p=3,a=r.v,console.error("提交友链申请失败:",a),e.$message.error("提交友链申请失败");case 4:r.n=6;break;case 5:return r.a(2,!1);case 6:return r.a(2)}},r,null,[[1,3]])}));return function(e){return r.apply(this,arguments)}}())}}},c=o;var u=t(81656),d=(0,u.A)(c,i,a,!1,null,"e0f2649a",null);const m=d.exports}}]);
//# sourceMappingURL=313.a83409c1.js.map