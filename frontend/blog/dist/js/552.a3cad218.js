"use strict";(self["webpackChunkblog_frontend"]=self["webpackChunkblog_frontend"]||[]).push([[552],{17552:(e,r,s)=>{s.r(r),s.d(r,{default:()=>f});var a=function(){var e=this,r=e._self._c;return r("div",{staticClass:"login-container"},[r("el-card",{staticClass:"login-card"},[r("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(e.isLogin?"登录":"注册"))])]),r("el-form",{ref:"loginForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e.isLogin?e._e():r("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[r("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.form.confirmPassword,callback:function(r){e.$set(e.form,"confirmPassword",r)},expression:"form.confirmPassword"}})],1),e.isLogin?e._e():r("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[r("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.form.nickname,callback:function(r){e.$set(e.form,"nickname",r)},expression:"form.nickname"}})],1),e.isLogin?e._e():r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitForm}},[e._v(e._s(e.isLogin?"登录":"注册"))]),r("el-button",{on:{click:e.switchMode}},[e._v(e._s(e.isLogin?"去注册":"去登录"))])],1)],1)],1)],1)},o=[],i=s(20908),t=s(30388),n=s(41034),l=(s(16280),s(76918),s(44114),s(62010),s(93518));const m={name:"Login",data:function(){var e=this,r=function(r,s,a){s!==e.form.password?a(new Error("两次输入的密码不一致")):a()};return{isLogin:!0,loading:!1,form:{username:"",password:"",confirmPassword:"",nickname:"",email:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:r,trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]}}},methods:(0,n.A)((0,n.A)({},(0,l.i0)(["login","register"])),{},{submitForm:function(){var e=this;this.$refs.loginForm.validate(function(){var r=(0,t.A)((0,i.A)().m(function r(s){var a,o,t;return(0,i.A)().w(function(r){while(1)switch(r.p=r.n){case 0:if(!s){r.n=8;break}if(e.loading=!0,r.p=1,!e.isLogin){r.n=3;break}return r.n=2,e.login({username:e.form.username,password:e.form.password});case 2:e.$message.success("登录成功"),a=localStorage.getItem("redirectUrl"),o=a||"/",a&&localStorage.removeItem("redirectUrl"),e.$route.path!==o?e.$router.push(o)["catch"](function(e){"NavigationDuplicated"!==e.name&&console.error("Navigation error:",e)}):e.$router.go(0),r.n=5;break;case 3:return r.n=4,e.register({username:e.form.username,password:e.form.password,nickname:e.form.nickname,email:e.form.email});case 4:e.$message.success("注册成功，请登录"),e.isLogin=!0,e.resetForm();case 5:r.n=7;break;case 6:r.p=6,t=r.v,e.$message.error(t.message||"操作失败");case 7:return r.p=7,e.loading=!1,r.f(7);case 8:return r.a(2)}},r,null,[[1,6,7,8]])}));return function(e){return r.apply(this,arguments)}}())},switchMode:function(){this.isLogin=!this.isLogin,this.resetForm()},resetForm:function(){this.$refs.loginForm.resetFields()}})},c=m;var u=s(81656),g=(0,u.A)(c,a,o,!1,null,"17611db9",null);const f=g.exports}}]);
//# sourceMappingURL=552.a3cad218.js.map