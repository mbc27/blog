{"version":3,"file":"js/858.9877768f.js","mappings":"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","sources":["webpack://blog-frontend/./src/views/admin/CommentManagement.vue","webpack://blog-frontend/src/views/admin/CommentManagement.vue","webpack://blog-frontend/./src/views/admin/CommentManagement.vue?faad","webpack://blog-frontend/./src/views/admin/CommentManagement.vue?3804"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"comment-management\"},[_c('el-card',{attrs:{\"shadow\":\"hover\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"评论管理\")])]),_c('el-form',{staticClass:\"search-form\",attrs:{\"inline\":true,\"model\":_vm.searchForm}},[_c('el-form-item',{attrs:{\"label\":\"文章标题\"}},[_c('el-input',{attrs:{\"placeholder\":\"文章标题\",\"clearable\":\"\"},model:{value:(_vm.searchForm.articleTitle),callback:function ($$v) {_vm.$set(_vm.searchForm, \"articleTitle\", $$v)},expression:\"searchForm.articleTitle\"}})],1),_c('el-form-item',{attrs:{\"label\":\"评论内容\"}},[_c('el-input',{attrs:{\"placeholder\":\"评论内容\",\"clearable\":\"\"},model:{value:(_vm.searchForm.content),callback:function ($$v) {_vm.$set(_vm.searchForm, \"content\", $$v)},expression:\"searchForm.content\"}})],1),_c('el-form-item',{attrs:{\"label\":\"状态\"}},[_c('el-select',{attrs:{\"placeholder\":\"评论状态\",\"clearable\":\"\"},model:{value:(_vm.searchForm.status),callback:function ($$v) {_vm.$set(_vm.searchForm, \"status\", $$v)},expression:\"searchForm.status\"}},[_c('el-option',{attrs:{\"label\":\"已审核\",\"value\":1}}),_c('el-option',{attrs:{\"label\":\"待审核\",\"value\":0}})],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchComments}},[_vm._v(\"查询\")]),_c('el-button',{on:{\"click\":_vm.resetSearch}},[_vm._v(\"重置\")])],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.comments}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"80\",\"index\":_vm.indexMethod}}),_c('el-table-column',{attrs:{\"prop\":\"articleTitle\",\"label\":\"文章标题\",\"min-width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"content\":scope.row.articleTitle,\"placement\":\"top\",\"disabled\":!scope.row.articleTitle || scope.row.articleTitle.length < 20}},[_c('span',[_vm._v(_vm._s(_vm._f(\"ellipsis\")((scope.row.articleTitle || '未知文章'),20)))])])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"content\",\"label\":\"评论内容\",\"min-width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"content\":scope.row.content,\"placement\":\"top\",\"disabled\":scope.row.content.length < 30}},[_c('span',[_vm._v(_vm._s(_vm._f(\"ellipsis\")(scope.row.content,30)))])])]}}])}),_c('el-table-column',{attrs:{\"label\":\"评论人\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.nickname || '匿名用户'))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"状态\",\"width\":\"100\"}},[[_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\" 已发布 \")])]],2),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"评论时间\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"250\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleView(scope.row)}}},[_vm._v(\"查看\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pagination.current,\"page-sizes\":[10, 20, 30, 50],\"page-size\":_vm.pagination.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1),_c('el-dialog',{attrs:{\"title\":\"评论详情\",\"visible\":_vm.dialogVisible,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"comment-detail\"},[_c('div',{staticClass:\"comment-item\"},[_c('div',{staticClass:\"comment-header\"},[_c('span',{staticClass:\"comment-author\"},[_vm._v(_vm._s(_vm.currentComment.nickname))]),_c('span',{staticClass:\"comment-time\"},[_vm._v(_vm._s(_vm.currentComment.createTime))])]),_c('div',{staticClass:\"comment-content\"},[_vm._v(_vm._s(_vm.currentComment.content))]),_c('div',{staticClass:\"comment-article\"},[_c('span',[_vm._v(\"评论文章：\")]),_c('el-link',{attrs:{\"type\":\"primary\",\"underline\":false},on:{\"click\":function($event){return _vm.viewArticle(_vm.currentComment.articleId)}}},[_vm._v(_vm._s(_vm.currentComment.articleTitle))])],1),_c('div',{staticClass:\"comment-info\"},[_c('span',[_vm._v(\"IP地址：\"+_vm._s(_vm.currentComment.ipAddress || '未知'))]),_c('span',[_vm._v(\"设备信息：\"+_vm._s(_vm.currentComment.device || '未知'))])])]),(_vm.currentComment.replyCount > 0)?_c('div',{staticClass:\"comment-reply\"},[_c('div',{staticClass:\"reply-title\"},[_vm._v(\"回复列表\")]),_c('div',{staticClass:\"reply-list\"},_vm._l((_vm.replies),function(reply,index){return _c('div',{key:index,staticClass:\"reply-item\"},[_c('div',{staticClass:\"reply-header\"},[_c('span',{staticClass:\"reply-author\"},[_vm._v(_vm._s(reply.nickname))]),_c('span',{staticClass:\"reply-time\"},[_vm._v(_vm._s(reply.createTime))])]),_c('div',{staticClass:\"reply-content\"},[_vm._v(_vm._s(reply.content))])])}),0)]):_vm._e()]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"关闭\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(_vm.currentComment)}}},[_vm._v(\"删除评论\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"comment-management\">\n    <el-card shadow=\"hover\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>评论管理</span>\n      </div>\n      \n      <el-form :inline=\"true\" :model=\"searchForm\" class=\"search-form\">\n        <el-form-item label=\"文章标题\">\n          <el-input v-model=\"searchForm.articleTitle\" placeholder=\"文章标题\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"评论内容\">\n          <el-input v-model=\"searchForm.content\" placeholder=\"评论内容\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"状态\">\n          <el-select v-model=\"searchForm.status\" placeholder=\"评论状态\" clearable>\n            <el-option label=\"已审核\" :value=\"1\"></el-option>\n            <el-option label=\"待审核\" :value=\"0\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"searchComments\">查询</el-button>\n          <el-button @click=\"resetSearch\">重置</el-button>\n        </el-form-item>\n      </el-form>\n      \n      <el-table\n        :data=\"comments\"\n        style=\"width: 100%\"\n        v-loading=\"loading\">\n        <el-table-column\n          type=\"index\"\n          label=\"序号\"\n          width=\"80\"\n          :index=\"indexMethod\">\n        </el-table-column>\n        <el-table-column\n          prop=\"articleTitle\"\n          label=\"文章标题\"\n          min-width=\"180\">\n          <template slot-scope=\"scope\">\n            <el-tooltip :content=\"scope.row.articleTitle\" placement=\"top\" :disabled=\"!scope.row.articleTitle || scope.row.articleTitle.length < 20\">\n              <span>{{ (scope.row.articleTitle || '未知文章') | ellipsis(20) }}</span>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"content\"\n          label=\"评论内容\"\n          min-width=\"200\">\n          <template slot-scope=\"scope\">\n            <el-tooltip :content=\"scope.row.content\" placement=\"top\" :disabled=\"scope.row.content.length < 30\">\n              <span>{{ scope.row.content | ellipsis(30) }}</span>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"评论人\"\n          width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.nickname || '匿名用户' }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"状态\"\n          width=\"100\">\n          <template>\n            <el-tag type=\"success\">\n              已发布\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"createTime\"\n          label=\"评论时间\"\n          width=\"180\">\n        </el-table-column>\n        <el-table-column\n          label=\"操作\"\n          width=\"250\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              @click=\"handleView(scope.row)\">查看</el-button>\n            <el-button\n              size=\"mini\"\n              type=\"danger\"\n              @click=\"handleDelete(scope.row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      \n      <div class=\"pagination-container\">\n        <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"pagination.current\"\n          :page-sizes=\"[10, 20, 30, 50]\"\n          :page-size=\"pagination.size\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"pagination.total\">\n        </el-pagination>\n      </div>\n    </el-card>\n\n    <!-- 评论详情对话框 -->\n    <el-dialog title=\"评论详情\" :visible.sync=\"dialogVisible\" width=\"600px\">\n      <div class=\"comment-detail\">\n        <div class=\"comment-item\">\n          <div class=\"comment-header\">\n            <span class=\"comment-author\">{{ currentComment.nickname }}</span>\n            <span class=\"comment-time\">{{ currentComment.createTime }}</span>\n          </div>\n          <div class=\"comment-content\">{{ currentComment.content }}</div>\n          <div class=\"comment-article\">\n            <span>评论文章：</span>\n            <el-link type=\"primary\" :underline=\"false\" @click=\"viewArticle(currentComment.articleId)\">{{ currentComment.articleTitle }}</el-link>\n          </div>\n          <div class=\"comment-info\">\n            <span>IP地址：{{ currentComment.ipAddress || '未知' }}</span>\n            <span>设备信息：{{ currentComment.device || '未知' }}</span>\n          </div>\n        </div>\n\n        <div class=\"comment-reply\" v-if=\"currentComment.replyCount > 0\">\n          <div class=\"reply-title\">回复列表</div>\n          <div class=\"reply-list\">\n            <div class=\"reply-item\" v-for=\"(reply, index) in replies\" :key=\"index\">\n              <div class=\"reply-header\">\n                <span class=\"reply-author\">{{ reply.nickname }}</span>\n                <span class=\"reply-time\">{{ reply.createTime }}</span>\n              </div>\n              <div class=\"reply-content\">{{ reply.content }}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">关闭</el-button>\n        <el-button type=\"danger\" @click=\"handleDelete(currentComment)\">删除评论</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'CommentManagement',\n  data() {\n    return {\n      searchForm: {\n        articleTitle: '',\n        content: '',\n        status: ''\n      },\n      comments: [],\n      loading: false,\n      pagination: {\n        current: 1,\n        size: 10,\n        total: 0\n      },\n      dialogVisible: false,\n      currentComment: {},\n      replies: []\n    }\n  },\n  filters: {\n    ellipsis(value, maxLength) {\n      if (!value) return ''\n      if (value.length <= maxLength) return value\n      return value.slice(0, maxLength) + '...'\n    }\n  },\n  created() {\n    this.fetchComments()\n  },\n  methods: {\n    indexMethod(index) {\n      return index + 1;\n    },\n    fetchComments() {\n      this.loading = true\n      const params = {\n        current: this.pagination.current,\n        size: this.pagination.size,\n        ...this.searchForm\n      }\n      \n      axios.get('/api/comment', { \n        params,\n        headers: {\n          Authorization: this.$store.getters.token\n        }\n      })\n        .then(response => {\n          if (response.data && response.data.data) {\n            // 检查返回的数据是否是分页对象\n            if (response.data.data.records) {\n              this.comments = response.data.data.records\n              this.pagination.total = response.data.data.total\n            } else {\n              this.comments = response.data.data\n              this.pagination.total = response.data.total || response.data.data.length\n            }\n          }\n        })\n        .catch(error => {\n          console.error('获取评论列表失败', error)\n          this.$message.error('获取评论列表失败')\n        })\n        .finally(() => {\n          this.loading = false\n        })\n    },\n    searchComments() {\n      this.pagination.current = 1\n      this.fetchComments()\n    },\n    resetSearch() {\n      this.searchForm = {\n        articleTitle: '',\n        content: '',\n        status: ''\n      }\n      this.searchComments()\n    },\n    handleSizeChange(val) {\n      this.pagination.size = val\n      this.fetchComments()\n    },\n    handleCurrentChange(val) {\n      this.pagination.current = val\n      this.fetchComments()\n    },\n    handleView(row) {\n      this.currentComment = { ...row }\n      this.dialogVisible = true\n      \n      // 获取评论回复\n      if (row.replyCount > 0) {\n        axios.get(`/api/comment/${row.id}/replies`, {\n          headers: {\n            Authorization: this.$store.getters.token\n          }\n        })\n          .then(response => {\n            this.replies = response.data.data || response.data\n          })\n          .catch(error => {\n            console.error('获取评论回复失败', error)\n            this.$message.error('获取评论回复失败')\n          })\n      } else {\n        this.replies = []\n      }\n    },\n    handleApprove(row) {\n      this.$confirm('确认审核通过该评论吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'info'\n      }).then(() => {\n        axios.put(`/api/comment/${row.id}/approve`, {}, {\n          headers: {\n            Authorization: this.$store.getters.token\n          }\n        })\n          .then(() => {\n            this.$message.success('审核通过成功')\n            this.fetchComments()\n            if (this.dialogVisible) {\n              this.dialogVisible = false\n            }\n          })\n          .catch(error => {\n            console.error('审核评论失败', error)\n            this.$message.error('审核评论失败')\n          })\n      }).catch(() => {})\n    },\n    handleDelete(row) {\n      this.$confirm('确认删除该评论吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        axios.delete(`/api/comment/${row.id}`, {\n          headers: {\n            Authorization: this.$store.getters.token\n          }\n        })\n          .then(() => {\n            this.$message.success('删除成功')\n            this.fetchComments()\n            if (this.dialogVisible) {\n              this.dialogVisible = false\n            }\n          })\n          .catch(error => {\n            console.error('删除评论失败', error)\n            this.$message.error('删除评论失败')\n          })\n      }).catch(() => {})\n    },\n    viewArticle(articleId) {\n      // 在新标签页中打开文章\n      const routeUrl = this.$router.resolve({\n        path: `/article/${articleId}`\n      })\n      window.open(routeUrl.href, '_blank')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.comment-management {\n  padding: 20px;\n}\n.search-form {\n  margin-bottom: 20px;\n}\n.pagination-container {\n  margin-top: 20px;\n  text-align: right;\n}\n.comment-detail {\n  padding: 10px;\n}\n.comment-item {\n  border-bottom: 1px solid #eee;\n  padding-bottom: 15px;\n  margin-bottom: 15px;\n}\n.comment-header {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n}\n.comment-author {\n  font-weight: bold;\n  color: #409EFF;\n}\n.comment-time {\n  color: #999;\n  font-size: 12px;\n}\n.comment-content {\n  margin-bottom: 10px;\n  line-height: 1.5;\n  word-break: break-all;\n}\n.comment-article {\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n.comment-info {\n  display: flex;\n  justify-content: space-between;\n  color: #999;\n  font-size: 12px;\n}\n.reply-title {\n  font-weight: bold;\n  margin-bottom: 10px;\n}\n.reply-item {\n  background-color: #f9f9f9;\n  padding: 10px;\n  margin-bottom: 10px;\n  border-radius: 4px;\n}\n.reply-header {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 5px;\n}\n.reply-author {\n  font-weight: bold;\n}\n.reply-time {\n  color: #999;\n  font-size: 12px;\n}\n.reply-content {\n  line-height: 1.5;\n  word-break: break-all;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentManagement.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentManagement.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CommentManagement.vue?vue&type=template&id=94bf0a98&scoped=true\"\nimport script from \"./CommentManagement.vue?vue&type=script&lang=js\"\nexport * from \"./CommentManagement.vue?vue&type=script&lang=js\"\nimport style0 from \"./CommentManagement.vue?vue&type=style&index=0&id=94bf0a98&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"94bf0a98\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","searchForm","model","value","articleTitle","callback","$$v","$set","expression","content","status","on","searchComments","resetSearch","directives","name","rawName","loading","staticStyle","comments","indexMethod","scopedSlots","_u","key","fn","scope","row","length","_s","_f","nickname","$event","handleView","handleDelete","pagination","current","size","total","handleSizeChange","handleCurrentChange","dialogVisible","currentComment","createTime","viewArticle","articleId","ipAddress","device","replyCount","_l","replies","reply","index","_e","staticRenderFns","data","filters","ellipsis","maxLength","slice","created","fetchComments","methods","_this","params","_objectSpread","axios","headers","Authorization","$store","getters","token","then","response","records","error","console","$message","val","_this2","concat","id","handleApprove","_this3","$confirm","confirmButtonText","cancelButtonText","type","success","_this4","routeUrl","$router","resolve","path","window","open","href","component"],"sourceRoot":""}