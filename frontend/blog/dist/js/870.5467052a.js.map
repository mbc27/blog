{"version":3,"file":"js/870.5467052a.js","mappings":"kJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,UAAU,CAACG,MAAM,CAAC,OAAS,UAAU,CAACH,EAAG,MAAM,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACJ,EAAG,OAAO,CAACF,EAAIO,GAAG,YAAYL,EAAG,WAAW,CAACM,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOX,EAAIY,QAASC,WAAW,YAAYC,YAAY,CAAC,MAAQ,QAAQT,MAAM,CAAC,KAAOL,EAAIe,WAAW,CAACb,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,QAAQ,MAAQ,KAAK,YAAY,OAAOW,YAAYhB,EAAIiB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAClB,EAAG,aAAa,CAACG,MAAM,CAAC,QAAUe,EAAMC,IAAIC,MAAM,UAAY,MAAM,SAAWF,EAAMC,IAAIC,MAAMC,OAAS,KAAK,CAACrB,EAAG,OAAO,CAACF,EAAIO,GAAGP,EAAIwB,GAAGxB,EAAIyB,GAAG,WAAPzB,CAAmBoB,EAAMC,IAAIC,MAAM,UAAU,OAAOpB,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,aAAa,MAAQ,KAAK,MAAQ,SAASH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,eAAe,MAAQ,KAAK,MAAQ,SAASH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,eAAe,MAAQ,MAAM,MAAQ,SAASH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,KAAK,MAAQ,OAAOW,YAAYhB,EAAIiB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAClB,EAAG,SAAS,CAACG,MAAM,CAAC,KAAOL,EAAI0B,cAAcN,EAAMC,IAAIM,UAAU,CAAC3B,EAAIO,GAAG,IAAIP,EAAIwB,GAAGxB,EAAI4B,cAAcR,EAAMC,IAAIM,SAAS,OAAO,OAAOzB,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,aAAa,MAAQ,OAAO,MAAQ,SAASH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,KAAK,MAAQ,OAAOW,YAAYhB,EAAIiB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAClB,EAAG,kBAAkB,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQwB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO9B,EAAI+B,cAAcX,EAAMC,IAAI,IAAI,CAACrB,EAAIO,GAAG,QAA8B,IAArBa,EAAMC,IAAIM,OAAczB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,WAAWwB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO9B,EAAIgC,cAAcZ,EAAMC,IAAI,IAAI,CAACrB,EAAIO,GAAG,QAAQP,EAAIiC,KAA2B,IAArBb,EAAMC,IAAIM,OAAczB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,UAAUwB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO9B,EAAIkC,aAAad,EAAMC,IAAI,IAAI,CAACrB,EAAIO,GAAG,QAAQP,EAAIiC,MAAM,GAAG,QAAQ,GAAG/B,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,gBAAgB,CAACG,MAAM,CAAC,eAAeL,EAAImC,WAAWC,QAAQ,aAAa,CAAC,GAAI,GAAI,GAAI,IAAI,YAAYpC,EAAImC,WAAWE,KAAK,OAAS,0CAA0C,MAAQrC,EAAImC,WAAWG,OAAOT,GAAG,CAAC,cAAc7B,EAAIuC,iBAAiB,iBAAiBvC,EAAIwC,wBAAwB,IAAI,GAAGtC,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,OAAO,QAAUL,EAAIyC,eAAe,MAAQ,OAAOZ,GAAG,CAAC,iBAAiB,SAASC,GAAQ9B,EAAIyC,eAAeX,CAAM,IAAI,CAAE9B,EAAI0C,eAAgBxC,EAAG,MAAM,CAACA,EAAG,KAAK,CAACF,EAAIO,GAAGP,EAAIwB,GAAGxB,EAAI0C,eAAepB,UAAUpB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,OAAO,CAACF,EAAIO,GAAG,MAAMP,EAAIwB,GAAGxB,EAAI0C,eAAeC,eAAezC,EAAG,OAAO,CAACF,EAAIO,GAAG,QAAQP,EAAIwB,GAAGxB,EAAI0C,eAAeE,iBAAkB5C,EAAI0C,eAAeG,QAAS3C,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,KAAK,CAACF,EAAIO,GAAG,SAASL,EAAG,IAAI,CAACF,EAAIO,GAAGP,EAAIwB,GAAGxB,EAAI0C,eAAeG,cAAc7C,EAAIiC,KAAK/B,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,KAAK,CAACF,EAAIO,GAAG,SAASL,EAAG,MAAM,CAAC4C,SAAS,CAAC,UAAY9C,EAAIwB,GAAGxB,EAAI0C,eAAeK,gBAAgB/C,EAAIiC,QAAQ,EAC98F,EACIe,EAAkB,G,2JC8GtB,SACAvC,KAAA,gBACAwC,KAAA,WACA,OACAlC,SAAA,GACAH,SAAA,EACAuB,WAAA,CACAC,QAAA,EACAC,KAAA,GACAC,MAAA,GAEAG,gBAAA,EACAC,eAAA,KAEA,EACAQ,UAAAC,EAAAA,EAAAA,GAAA,IACAC,EAAAA,EAAAA,IAAA,YAEAC,QAAA,CACAC,SAAA,SAAA3C,EAAA4C,GACA,OAAA5C,EACAA,EAAAY,QAAAgC,EAAA5C,EACAA,EAAA6C,MAAA,EAAAD,GAAA,MAFA,EAGA,GAEAE,QAAA,WACA,KAAAC,sBACA,EACAC,QAAA,CACAD,qBAAA,eAAAE,EAAA,YAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,EAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAnD,EAAAuB,EAAA6B,EAAAC,EAAA,OAAAN,EAAAA,EAAAA,KAAAO,EAAA,SAAAC,GAAA,eAAAA,EAAAC,EAAAD,EAAAE,GAAA,OAKA,OAJAZ,EAAAhD,SAAA,EACAqD,EAAA,CACA7B,QAAAwB,EAAAzB,WAAAC,QACAC,KAAAuB,EAAAzB,WAAAE,MACAiC,EAAAC,EAAA,EAAAD,EAAAE,EAAA,EAGAC,IAAAA,IAAA,wBACAR,OAAAA,EACAS,QAAA,CACA,cAAAd,EAAAe,SAEA,OAcA,GAnBAT,EAAAI,EAAAM,EAOAC,QAAAC,IAAA,WAAAZ,GACAnD,EAAA,GACAuB,EAAA,EAEA4B,EAAAjB,MAAA,MAAAiB,EAAAjB,KAAA8B,MACAhE,EAAAmD,EAAAjB,KAAAA,KAAA+B,SAAA,GACA1C,EAAA4B,EAAAjB,KAAAA,KAAAX,OAAA,GACA,MAAA4B,EAAAa,OACAhE,EAAAmD,EAAAjB,KAAA+B,SAAA,GACA1C,EAAA4B,EAAAjB,KAAAX,OAAA,KAIAvB,EAAAQ,OAAA,IAAA+C,EAAAE,EAAA,eAAAF,EAAAE,EAAA,EACAZ,EAAAqB,iBAAAlE,GAAA,OAAAoD,EAAAG,EAAAM,EACAhB,EAAA7C,SAAAoD,EAAAG,EAAAE,EAAA,eAEAZ,EAAA7C,SAAAA,EAAA,OAGA6C,EAAAzB,WAAAG,MAAAA,EAAAgC,EAAAE,EAAA,eAAAF,EAAAC,EAAA,EAAAH,EAAAE,EAAAM,EAGAC,QAAAK,MAAA,YAAAd,GACAR,EAAAuB,SAAAD,MAAA,oBAEA,OAFAZ,EAAAC,EAAA,EAEAX,EAAAhD,SAAA,EAAA0D,EAAAc,EAAA,iBAAAd,EAAAe,EAAA,KAAArB,EAAA,oBAzCAH,EA2CA,EAGAoB,iBAAA,SAAAlE,GAAA,IAAAuE,EAAA,YAAAzB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,EAAA,SAAAwB,IAAA,IAAAC,EAAA,OAAA1B,EAAAA,EAAAA,KAAAO,EAAA,SAAAoB,GAAA,eAAAA,EAAAjB,GAAA,cAAAiB,EAAAjB,EAAA,EACAc,EAAAI,sBAAA3E,EAAA4E,IAAA,SAAAN,GAAA,OAAAA,EAAAO,EAAA,kBAAAJ,EAAAC,EAAAb,EAAAa,EAAAJ,EAAA,EAEAtE,EAAA4E,IAAA,SAAAE,GAAA,OAAA1C,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACA0C,GAAA,IACAC,aAAAN,EAAAK,EAAAD,KAAA,OACA,EAAAL,EAAA,GANA1B,EAOA,EAGA6B,sBAAA,SAAAK,GAAA,IAAAC,EAAA,YAAAnC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,EAAA,SAAAkC,IAAA,IAAAT,EAAAU,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAxC,EAAAA,EAAAA,KAAAO,EAAA,SAAAkC,GAAA,eAAAA,EAAA/B,GAAA,OACAgB,EAAA,GAGAU,EAAA,EACAC,EAAA,cAAAA,EAAAJ,EAAAxE,QAAA,CAAAgF,EAAA/B,EAAA,QA2BA,OA1BA4B,EAAAL,EAAAvC,MAAA2C,EAAAA,EAAAD,GACAG,EAAAD,EAAAT,IAAA,eAAAa,GAAA3C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,EAAA,SAAA0C,EAAAC,GAAA,IAAAxC,EAAA5B,EAAAqE,EAAA,OAAA7C,EAAAA,EAAAA,KAAAO,EAAA,SAAAuC,GAAA,eAAAA,EAAArC,EAAAqC,EAAApC,GAAA,cAAAoC,EAAArC,EAAA,EAAAqC,EAAApC,EAAA,EAEAC,IAAAA,IAAA,qBACAR,OAAA,CACAyC,UAAAA,EACAtE,QAAA,EACAC,KAAA,GAEAqC,QAAA,CACA,cAAAsB,EAAArB,SAEA,OAOA,OAhBAT,EAAA0C,EAAAhC,EAWAtC,EAAA,EACA4B,EAAAjB,MAAA,MAAAiB,EAAAjB,KAAA8B,KACAzC,EAAA4B,EAAAjB,KAAAA,KAAAX,OAAA,EACA,MAAA4B,EAAAa,OACAzC,EAAA4B,EAAAjB,KAAAX,OAAA,GACAsE,EAAAvB,EAAA,EAEA,CAAAqB,UAAAA,EAAApE,MAAAA,IAAA,OAEA,OAFAsE,EAAArC,EAAA,EAAAoC,EAAAC,EAAAhC,EAEAC,QAAAK,MAAA,OAAA2B,OAAAH,EAAA,WAAAC,GAAAC,EAAAvB,EAAA,EACA,CAAAqB,UAAAA,EAAApE,MAAA,MAAAmE,EAAA,iBAEA,gBAAAK,GAAA,OAAAN,EAAAO,MAAA,KAAAC,UAAA,EAzBA,IAyBAT,EAAA/B,EAAA,EAEAyC,QAAAC,IAAAb,GAAA,OAAAC,EAAAC,EAAA3B,EACA0B,EAAAa,QAAA,SAAAC,GAAA,IAAAV,EAAAU,EAAAV,UAAApE,EAAA8E,EAAA9E,MACAkD,EAAAkB,GAAApE,CACA,UAhCA6D,GAAAD,EAAAK,EAAA/B,EAAA,sBAAA+B,EAAAlB,EAAA,EAmCAG,GAAA,EAAAS,EAAA,GAxCApC,EAyCA,EACAtB,iBAAA,SAAA8E,GACA,KAAAlF,WAAAE,KAAAgF,EACA,KAAA3D,sBACA,EACAlB,oBAAA,SAAA6E,GACA,KAAAlF,WAAAC,QAAAiF,EACA,KAAA3D,sBACA,EACA3B,cAAA,SAAAV,GACA,KAAAqB,eAAArB,EACA,KAAAoB,gBAAA,CACA,EACAT,cAAA,SAAAX,GAAA,IAAAiG,EAAA,KACA,KAAAC,SAAA,qBACAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,YACAC,KAAA,WACAlD,IAAAA,IAAA,wBAAAoC,OAAAxF,EAAAuE,IAAA,IACAlB,QAAA,CACA,cAAA4C,EAAA3C,SAGAgD,KAAA,SAAAzD,GACAA,EAAAjB,MAAA,MAAAiB,EAAAjB,KAAA8B,MAGA,MAAAb,EAAAa,MAFAuC,EAAAnC,SAAAyC,QAAA,QACAN,EAAA5D,wBAKA4D,EAAAnC,SAAAD,MAAAhB,EAAA2D,SAAA,OAEA,YACA,SAAA3C,GACAL,QAAAK,MAAA,SAAAA,GACAoC,EAAAnC,SAAAD,MAAA,SACA,EACA,yBACA,EACAhD,aAAA,SAAAb,GAAA,IAAAyG,EAAA,KACA,KAAAP,SAAA,qBACAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,YACAC,KAAA,WACAlD,IAAAA,IAAA,uBAAAoC,OAAAxF,EAAAuE,IAAA,IACAlB,QAAA,CACA,cAAAoD,EAAAnD,SAGAgD,KAAA,SAAAzD,GACAA,EAAAjB,MAAA,MAAAiB,EAAAjB,KAAA8B,MAGA,MAAAb,EAAAa,MAFA+C,EAAA3C,SAAAyC,QAAA,QACAE,EAAApE,wBAKAoE,EAAA3C,SAAAD,MAAAhB,EAAA2D,SAAA,OAEA,YACA,SAAA3C,GACAL,QAAAK,MAAA,SAAAA,GACA4C,EAAA3C,SAAAD,MAAA,SACA,EACA,yBACA,EACAxD,cAAA,SAAAC,GACA,OAAAA,GACA,uBACA,uBACA,sBACA,qBAEA,EACAC,cAAA,SAAAD,GACA,OAAAA,GACA,kBACA,mBACA,mBACA,qBACA,mBAEA,ICnUqQ,I,eCQjQoG,GAAY,OACd,EACAhI,EACAiD,GACA,EACA,KACA,WACA,MAIF,QAAe+E,E","sources":["webpack://blog-frontend/./src/views/admin/ArticleReview.vue","webpack://blog-frontend/src/views/admin/ArticleReview.vue","webpack://blog-frontend/./src/views/admin/ArticleReview.vue?4502","webpack://blog-frontend/./src/views/admin/ArticleReview.vue?68ad"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"article-review\"},[_c('el-card',{attrs:{\"shadow\":\"hover\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"文章审核\")])]),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.articles}},[_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"标题\",\"min-width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"content\":scope.row.title,\"placement\":\"top\",\"disabled\":scope.row.title.length < 30}},[_c('span',[_vm._v(_vm._s(_vm._f(\"ellipsis\")(scope.row.title,30)))])])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"authorName\",\"label\":\"作者\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"categoryName\",\"label\":\"分类\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"commentCount\",\"label\":\"评论数\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm.getStatusType(scope.row.status)}},[_vm._v(\" \"+_vm._s(_vm.getStatusText(scope.row.status))+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建时间\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button-group',[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handlePreview(scope.row)}}},[_vm._v(\"预览\")]),(scope.row.status === 2)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.handleApprove(scope.row)}}},[_vm._v(\"通过\")]):_vm._e(),(scope.row.status === 2)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleReject(scope.row)}}},[_vm._v(\"拒绝\")]):_vm._e()],1)]}}])})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pagination.current,\"page-sizes\":[10, 20, 30, 50],\"page-size\":_vm.pagination.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1),_c('el-dialog',{attrs:{\"title\":\"文章预览\",\"visible\":_vm.previewVisible,\"width\":\"80%\"},on:{\"update:visible\":function($event){_vm.previewVisible=$event}}},[(_vm.previewArticle)?_c('div',[_c('h2',[_vm._v(_vm._s(_vm.previewArticle.title))]),_c('div',{staticClass:\"article-meta\"},[_c('span',[_vm._v(\"作者：\"+_vm._s(_vm.previewArticle.authorName))]),_c('span',[_vm._v(\"创建时间：\"+_vm._s(_vm.previewArticle.createTime))])]),(_vm.previewArticle.summary)?_c('div',{staticClass:\"article-summary\"},[_c('h4',[_vm._v(\"摘要：\")]),_c('p',[_vm._v(_vm._s(_vm.previewArticle.summary))])]):_vm._e(),_c('div',{staticClass:\"article-content\"},[_c('h4',[_vm._v(\"内容：\")]),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.previewArticle.content)}})])]):_vm._e()])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"article-review\">\r\n    <el-card shadow=\"hover\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>文章审核</span>\r\n      </div>\r\n      \r\n      <el-table\r\n        :data=\"articles\"\r\n        style=\"width: 100%\"\r\n        v-loading=\"loading\">\r\n        <el-table-column\r\n          prop=\"title\"\r\n          label=\"标题\"\r\n          min-width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tooltip :content=\"scope.row.title\" placement=\"top\" :disabled=\"scope.row.title.length < 30\">\r\n              <span>{{ scope.row.title | ellipsis(30) }}</span>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"authorName\"\r\n          label=\"作者\"\r\n          width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"categoryName\"\r\n          label=\"分类\"\r\n          width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"commentCount\"\r\n          label=\"评论数\"\r\n          width=\"100\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"status\"\r\n          label=\"状态\"\r\n          width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag :type=\"getStatusType(scope.row.status)\">\r\n              {{ getStatusText(scope.row.status) }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"createTime\"\r\n          label=\"创建时间\"\r\n          width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"操作\"\r\n          width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button-group>\r\n              <el-button\r\n                size=\"mini\"\r\n                @click=\"handlePreview(scope.row)\">预览</el-button>\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"success\"\r\n                @click=\"handleApprove(scope.row)\"\r\n                v-if=\"scope.row.status === 2\">通过</el-button>\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"handleReject(scope.row)\"\r\n                v-if=\"scope.row.status === 2\">拒绝</el-button>\r\n            </el-button-group>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      \r\n      <div class=\"pagination-container\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pagination.current\"\r\n          :page-sizes=\"[10, 20, 30, 50]\"\r\n          :page-size=\"pagination.size\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"pagination.total\">\r\n        </el-pagination>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 文章预览对话框 -->\r\n    <el-dialog title=\"文章预览\" :visible.sync=\"previewVisible\" width=\"80%\">\r\n      <div v-if=\"previewArticle\">\r\n        <h2>{{ previewArticle.title }}</h2>\r\n        <div class=\"article-meta\">\r\n          <span>作者：{{ previewArticle.authorName }}</span>\r\n          <span>创建时间：{{ previewArticle.createTime }}</span>\r\n        </div>\r\n        <div class=\"article-summary\" v-if=\"previewArticle.summary\">\r\n          <h4>摘要：</h4>\r\n          <p>{{ previewArticle.summary }}</p>\r\n        </div>\r\n        <div class=\"article-content\">\r\n          <h4>内容：</h4>\r\n          <div v-html=\"previewArticle.content\"></div>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  name: 'ArticleReview',\r\n  data() {\r\n    return {\r\n      articles: [],\r\n      loading: false,\r\n      pagination: {\r\n        current: 1,\r\n        size: 10,\r\n        total: 0\r\n      },\r\n      previewVisible: false,\r\n      previewArticle: null\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['token'])\r\n  },\r\n  filters: {\r\n    ellipsis(value, maxLength) {\r\n      if (!value) return ''\r\n      if (value.length <= maxLength) return value\r\n      return value.slice(0, maxLength) + '...'\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchPendingArticles()\r\n  },\r\n  methods: {\r\n    async fetchPendingArticles() {\r\n      this.loading = true\r\n      const params = {\r\n        current: this.pagination.current,\r\n        size: this.pagination.size\r\n      }\r\n      \r\n      try {\r\n        const response = await axios.get('/api/article/pending', { \r\n          params,\r\n          headers: {\r\n            'Authorization': this.token\r\n          }\r\n        })\r\n        \r\n        console.log('待审核文章响应:', response)\r\n        let articles = []\r\n        let total = 0\r\n        \r\n        if (response.data && response.data.code === 200) {\r\n          articles = response.data.data.records || []\r\n          total = response.data.data.total || 0\r\n        } else if (response.code === 200) {\r\n          articles = response.data.records || []\r\n          total = response.data.total || 0\r\n        }\r\n        \r\n        // 为文章添加评论数\r\n        if (articles.length > 0) {\r\n          const articlesWithCommentCount = await this.addCommentCounts(articles)\r\n          this.articles = articlesWithCommentCount\r\n        } else {\r\n          this.articles = articles\r\n        }\r\n        \r\n        this.pagination.total = total\r\n        \r\n      } catch (error) {\r\n        console.error('获取待审核文章失败', error)\r\n        this.$message.error('获取待审核文章失败')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    // 为文章添加评论数\r\n    async addCommentCounts(articles) {\r\n      const commentCountMap = await this.getBatchCommentCounts(articles.map(a => a.id))\r\n      \r\n      return articles.map(article => ({\r\n        ...article,\r\n        commentCount: commentCountMap[article.id] || 0\r\n      }))\r\n    },\r\n    \r\n    // 批量获取文章的评论数\r\n    async getBatchCommentCounts(articleIds) {\r\n      const commentCountMap = {}\r\n      \r\n      // 限制并发请求数量，避免服务器压力过大\r\n      const batchSize = 5\r\n      for (let i = 0; i < articleIds.length; i += batchSize) {\r\n        const batch = articleIds.slice(i, i + batchSize)\r\n        const promises = batch.map(async (articleId) => {\r\n          try {\r\n            const response = await axios.get('/api/comment/list', {\r\n              params: {\r\n                articleId: articleId,\r\n                current: 1,\r\n                size: 1 // 只需要获取总数，不需要具体数据\r\n              },\r\n              headers: {\r\n                'Authorization': this.token\r\n              }\r\n            })\r\n            \r\n            let total = 0\r\n            if (response.data && response.data.code === 200) {\r\n              total = response.data.data.total || 0\r\n            } else if (response.code === 200) {\r\n              total = response.data.total || 0\r\n            }\r\n            \r\n            return { articleId, total }\r\n          } catch (error) {\r\n            console.error(`获取文章${articleId}的评论数失败:`, error)\r\n            return { articleId, total: 0 }\r\n          }\r\n        })\r\n        \r\n        const results = await Promise.all(promises)\r\n        results.forEach(({ articleId, total }) => {\r\n          commentCountMap[articleId] = total\r\n        })\r\n      }\r\n      \r\n      return commentCountMap\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pagination.size = val\r\n      this.fetchPendingArticles()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pagination.current = val\r\n      this.fetchPendingArticles()\r\n    },\r\n    handlePreview(row) {\r\n      this.previewArticle = row\r\n      this.previewVisible = true\r\n    },\r\n    handleApprove(row) {\r\n      this.$confirm('确认通过该文章的审核吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        axios.put(`/api/article/approve/${row.id}`, {}, {\r\n          headers: {\r\n            'Authorization': this.token\r\n          }\r\n        })\r\n          .then(response => {\r\n            if (response.data && response.data.code === 200) {\r\n              this.$message.success('审核通过')\r\n              this.fetchPendingArticles()\r\n            } else if (response.code === 200) {\r\n              this.$message.success('审核通过')\r\n              this.fetchPendingArticles()\r\n            } else {\r\n              this.$message.error(response.message || '审核失败')\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error('审核通过失败', error)\r\n            this.$message.error('审核通过失败')\r\n          })\r\n      }).catch(() => {})\r\n    },\r\n    handleReject(row) {\r\n      this.$confirm('确认拒绝该文章的审核吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        axios.put(`/api/article/reject/${row.id}`, {}, {\r\n          headers: {\r\n            'Authorization': this.token\r\n          }\r\n        })\r\n          .then(response => {\r\n            if (response.data && response.data.code === 200) {\r\n              this.$message.success('审核拒绝')\r\n              this.fetchPendingArticles()\r\n            } else if (response.code === 200) {\r\n              this.$message.success('审核拒绝')\r\n              this.fetchPendingArticles()\r\n            } else {\r\n              this.$message.error(response.message || '审核失败')\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error('审核拒绝失败', error)\r\n            this.$message.error('审核拒绝失败')\r\n          })\r\n      }).catch(() => {})\r\n    },\r\n    getStatusType(status) {\r\n      switch (status) {\r\n        case 1: return 'success'\r\n        case 2: return 'warning'\r\n        case 3: return 'danger'\r\n        default: return 'info'\r\n      }\r\n    },\r\n    getStatusText(status) {\r\n      switch (status) {\r\n        case 0: return '草稿'\r\n        case 1: return '已发布'\r\n        case 2: return '待审核'\r\n        case 3: return '审核不通过'\r\n        default: return '未知'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.article-review {\r\n  padding: 20px;\r\n}\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n.article-meta {\r\n  margin: 10px 0;\r\n  color: #666;\r\n}\r\n.article-meta span {\r\n  margin-right: 20px;\r\n}\r\n.article-summary, .article-content {\r\n  margin: 20px 0;\r\n}\r\n.article-content {\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleReview.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleReview.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ArticleReview.vue?vue&type=template&id=0bf19c64&scoped=true\"\nimport script from \"./ArticleReview.vue?vue&type=script&lang=js\"\nexport * from \"./ArticleReview.vue?vue&type=script&lang=js\"\nimport style0 from \"./ArticleReview.vue?vue&type=style&index=0&id=0bf19c64&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bf19c64\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","directives","name","rawName","value","loading","expression","staticStyle","articles","scopedSlots","_u","key","fn","scope","row","title","length","_s","_f","getStatusType","status","getStatusText","on","$event","handlePreview","handleApprove","_e","handleReject","pagination","current","size","total","handleSizeChange","handleCurrentChange","previewVisible","previewArticle","authorName","createTime","summary","domProps","content","staticRenderFns","data","computed","_objectSpread","mapGetters","filters","ellipsis","maxLength","slice","created","fetchPendingArticles","methods","_this","_asyncToGenerator","_regenerator","m","_callee","params","response","articlesWithCommentCount","_t","w","_context","p","n","axios","headers","token","v","console","log","code","records","addCommentCounts","error","$message","f","a","_this2","_callee2","commentCountMap","_context2","getBatchCommentCounts","map","id","article","commentCount","articleIds","_this3","_callee4","batchSize","i","batch","promises","results","_context4","_ref","_callee3","articleId","_t2","_context3","concat","_x","apply","arguments","Promise","all","forEach","_ref2","val","_this4","$confirm","confirmButtonText","cancelButtonText","type","then","success","message","_this5","component"],"sourceRoot":""}