"use strict";(self["webpackChunkblog_frontend"]=self["webpackChunkblog_frontend"]||[]).push([[561],{3604:(t,e,r)=>{r.d(e,{A:()=>n});r(52675),r(89463),r(2259),r(16280),r(76918),r(64346),r(26099),r(47764),r(62953);var a=r(12635);function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=(0,a.A)(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,s=function(){};return{s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){l=!0,c=t},f:function(){try{o||null==r["return"]||r["return"]()}finally{if(l)throw c}}}}},6562:(t,e,r)=>{function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}r.d(e,{A:()=>a})},12635:(t,e,r)=>{r.d(e,{A:()=>n});r(76918),r(23418),r(34782),r(23288),r(62010),r(26099),r(27495),r(90906),r(38781),r(47764);var a=r(6562);function n(t,e){if(t){if("string"==typeof t)return(0,a.A)(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,a.A)(t,e):void 0}}},23418:(t,e,r)=>{var a=r(46518),n=r(97916),s=r(84428),c=!s(function(t){Array.from(t)});a({target:"Array",stat:!0,forced:c},{from:n})},33561:(t,e,r)=>{r.r(e),r.d(e,{default:()=>h});r(44114);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"admin-home"},[e("el-row",{attrs:{gutter:20}},t._l(t.stats,function(r){return e("el-col",{key:r.key,attrs:{span:6}},[e("el-card",{staticClass:"stat-card"},[e("div",{staticClass:"stat-content"},[e("div",{staticClass:"stat-icon",style:{backgroundColor:r.color}},[e("i",{class:r.icon})]),e("div",{staticClass:"stat-info"},[e("div",{staticClass:"stat-number"},[t._v(t._s(r.value))]),e("div",{staticClass:"stat-label"},[t._v(t._s(r.label))])])])])],1)}),1),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("最近文章")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.$router.push("/admin/article")}}},[t._v(" 查看更多 ")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.recentArticles,size:"small"}},[e("el-table-column",{attrs:{prop:"title",label:"标题","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"viewCount",label:"浏览量",width:"80"}}),e("el-table-column",{attrs:{prop:"createTime",label:"发布时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.row.createTime))+" ")]}}])})],1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("最近评论")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.$router.push("/admin/comment")}}},[t._v(" 查看更多 ")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.recentComments,size:"small"}},[e("el-table-column",{attrs:{prop:"nickname",label:"用户",width:"100"}}),e("el-table-column",{attrs:{prop:"content",label:"内容","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"createTime",label:"时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.row.createTime))+" ")]}}])})],1)],1)],1)],1),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("最近留言")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.$router.push("/admin/message")}}},[t._v(" 查看更多 ")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.recentMessages,size:"small"}},[e("el-table-column",{attrs:{prop:"nickname",label:"用户",width:"100"}}),e("el-table-column",{attrs:{prop:"content",label:"内容","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"createTime",label:"时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.row.createTime))+" ")]}}])})],1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("最近用户")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.$router.push("/admin/user")}}},[t._v(" 查看更多 ")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.recentUsers,size:"small"}},[e("el-table-column",{attrs:{prop:"nickname",label:"昵称",width:"100"}}),e("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"createTime",label:"注册时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.row.createTime))+" ")]}}])})],1)],1)],1)],1)],1)},n=[],s=(r(52675),r(89463),r(2259),r(16280),r(76918),r(26099),r(47764),r(62953),r(54119));function c(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError((0,s.A)(t)+" is not iterable")}var o=r(41034),l=r(3604),i=r(20908),u=r(30388),d=(r(28706),r(62062),r(34782),r(26910),r(23288),r(18111),r(61701),r(31552));const f={name:"AdminHome",data:function(){return{stats:[{key:"articles",label:"文章总数",value:0,icon:"el-icon-document",color:"#409EFF"},{key:"comments",label:"评论总数",value:0,icon:"el-icon-chat-line-square",color:"#67C23A"},{key:"messages",label:"留言总数",value:0,icon:"el-icon-message",color:"#E6A23C"},{key:"users",label:"用户总数",value:0,icon:"el-icon-user",color:"#F56C6C"}],recentArticles:[],recentComments:[],recentMessages:[],recentUsers:[]}},created:function(){this.loadDashboardData()},methods:{loadDashboardData:function(){var t=this;return(0,u.A)((0,i.A)().m(function e(){var r;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Promise.all([t.getArticleStats(),t.getCommentStats(),t.getMessageStats(),t.getUserStats(),t.getRecentArticles(),t.getRecentComments(),t.getRecentMessages(),t.getRecentUsers()]);case 1:e.n=3;break;case 2:e.p=2,r=e.v,console.error("加载仪表板数据失败:",r);case 3:return e.a(2)}},e,null,[[0,2]])}))()},getArticleStats:function(){var t=this;return(0,u.A)((0,i.A)().m(function e(){var r,a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d.A.article.getList({current:1,size:1});case 1:r=e.v,200===r.code&&(t.stats[0].value=r.data.total||0),e.n=3;break;case 2:e.p=2,a=e.v,console.error("获取文章统计失败:",a);case 3:return e.a(2)}},e,null,[[0,2]])}))()},getCommentStats:function(){var t=this;return(0,u.A)((0,i.A)().m(function e(){var r,a,n,s;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d.A.article.getList({current:1,size:1});case 1:if(r=e.v,!(200===r.code&&r.data.records.length>0)){e.n=3;break}return a=r.data.records[0].id,e.n=2,d.A.comment.getByArticle(a,{current:1,size:1});case 2:n=e.v,200===n.code&&(t.stats[1].value=n.data.total||0),e.n=4;break;case 3:t.stats[1].value=0;case 4:e.n=6;break;case 5:e.p=5,s=e.v,console.error("获取评论统计失败:",s),t.stats[1].value=0;case 6:return e.a(2)}},e,null,[[0,5]])}))()},getMessageStats:function(){var t=this;return(0,u.A)((0,i.A)().m(function e(){var r,a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d.A.message.getList({current:1,size:1});case 1:r=e.v,200===r.code&&(t.stats[2].value=r.data.total||0),e.n=3;break;case 2:e.p=2,a=e.v,console.error("获取留言统计失败:",a);case 3:return e.a(2)}},e,null,[[0,2]])}))()},getUserStats:function(){var t=this;return(0,u.A)((0,i.A)().m(function e(){var r,a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d.A.user.getList({current:1,size:1});case 1:r=e.v,200===r.code?t.stats[3].value=r.data.total||0:t.stats[3].value=0,e.n=3;break;case 2:e.p=2,a=e.v,console.error("获取用户统计失败:",a),t.stats[3].value=0;case 3:return e.a(2)}},e,null,[[0,2]])}))()},getRecentArticles:function(){var t=this;return(0,u.A)((0,i.A)().m(function e(){var r,a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d.A.article.getList({current:1,size:5});case 1:r=e.v,200===r.code&&(t.recentArticles=r.data.records||[]),e.n=3;break;case 2:e.p=2,a=e.v,console.error("获取最近文章失败:",a);case 3:return e.a(2)}},e,null,[[0,2]])}))()},getRecentComments:function(){var t=this;return(0,u.A)((0,i.A)().m(function e(){var r,a,n,s,u,f,m;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d.A.article.getList({current:1,size:3});case 1:if(r=e.v,!(200===r.code&&r.data.records.length>0)){e.n=9;break}a=[],n=(0,l.A)(r.data.records),e.p=2,u=(0,i.A)().m(function t(){var e,r,n,c;return(0,i.A)().w(function(t){while(1)switch(t.p=t.n){case 0:return e=s.value,t.p=1,t.n=2,d.A.comment.getByArticle(e.id,{current:1,size:3});case 2:r=t.v,200===r.code&&r.data.records&&(n=r.data.records.map(function(t){return(0,o.A)((0,o.A)({},t),{},{nickname:t.user?t.user.nickname:t.nickname||"匿名用户",articleTitle:e.title})}),a=a.concat(n)),t.n=4;break;case 3:t.p=3,c=t.v,console.log("获取文章评论失败:",c);case 4:return t.a(2)}},t,null,[[1,3]])}),n.s();case 3:if((s=n.n()).done){e.n=5;break}return e.d(c(u()),4);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,f=e.v,n.e(f);case 7:return e.p=7,n.f(),e.f(7);case 8:t.recentComments=a.sort(function(t,e){return new Date(e.createTime)-new Date(t.createTime)}).slice(0,5);case 9:e.n=11;break;case 10:e.p=10,m=e.v,console.error("获取最近评论失败:",m),t.recentComments=[];case 11:return e.a(2)}},e,null,[[2,6,7,8],[0,10]])}))()},getRecentMessages:function(){var t=this;return(0,u.A)((0,i.A)().m(function e(){var r,a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d.A.message.getRecentMessages({current:1,size:5});case 1:r=e.v,200===r.code&&(t.recentMessages=r.data.records||[]),e.n=3;break;case 2:e.p=2,a=e.v,console.error("获取最近留言失败:",a),t.recentMessages=[];case 3:return e.a(2)}},e,null,[[0,2]])}))()},getRecentUsers:function(){var t=this;return(0,u.A)((0,i.A)().m(function e(){return(0,i.A)().w(function(e){while(1)switch(e.n){case 0:try{t.recentUsers=[]}catch(r){console.error("获取最近用户失败:",r),t.recentUsers=[]}case 1:return e.a(2)}},e)}))()},formatDate:function(t){if(!t)return"";var e=new Date(t);return"".concat(e.getMonth()+1,"-").concat(e.getDate())}}},m=f;var p=r(81656),v=(0,p.A)(m,a,n,!1,null,"1f1663ce",null);const h=v.exports}}]);
//# sourceMappingURL=561.6b5a17c6.js.map