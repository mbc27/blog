"use strict";(self["webpackChunkblog_frontend"]=self["webpackChunkblog_frontend"]||[]).push([[264],{13264:(t,e,i)=>{i.r(e),i.d(e,{default:()=>g});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"admin-dashboard"},[e("el-container",[e("el-aside",{attrs:{width:"200px"}},[e("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":t.activeMenu,"background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF",router:""}},[e("el-menu-item",{attrs:{index:"/admin"}},[e("i",{staticClass:"el-icon-s-home"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v("控制台")])]),e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-document"}),e("span",[t._v("内容管理")])]),e("el-menu-item",{attrs:{index:"/admin/article"}},[t._v("文章管理")]),e("el-menu-item",{attrs:{index:"/admin/article-review"}},[t._v("文章审核")]),e("el-menu-item",{attrs:{index:"/admin/category"}},[t._v("分类管理")]),e("el-menu-item",{attrs:{index:"/admin/tag"}},[t._v("标签管理")]),e("el-menu-item",{attrs:{index:"/admin/comment"}},[t._v("评论管理")])],2),e("el-submenu",{attrs:{index:"2"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-picture"}),e("span",[t._v("相册管理")])]),e("el-menu-item",{attrs:{index:"/admin/photo"}},[t._v("照片管理")]),e("el-menu-item",{attrs:{index:"/admin/photo-category"}},[t._v("相册分类")])],2),e("el-menu-item",{attrs:{index:"/admin/message"}},[e("i",{staticClass:"el-icon-chat-line-square"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v("留言管理")])]),e("el-menu-item",{attrs:{index:"/admin/friend"}},[e("i",{staticClass:"el-icon-link"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v("友链管理")])]),e("el-menu-item",{attrs:{index:"/admin/user"}},[e("i",{staticClass:"el-icon-user"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])]),e("el-menu-item",{attrs:{index:"/admin/setting"}},[e("i",{staticClass:"el-icon-setting"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v("系统设置")])])],1)],1),e("el-container",[e("el-header",[e("div",{staticClass:"header-left"},[e("i",{staticClass:"el-icon-s-fold toggle-sidebar",on:{click:t.toggleSidebar}}),e("breadcrumb")],1),e("div",{staticClass:"header-right"},[e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("el-avatar",{attrs:{size:30,src:t.userAvatar}}),e("span",{staticClass:"username"},[t._v(t._s(t.nickname))]),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.goToProfile.apply(null,arguments)}}},[t._v("个人中心")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.logout.apply(null,arguments)}}},[t._v("退出登录")])],1)],1)],1)]),e("el-main",[e("router-view")],1)],1)],1)],1)},n=[],a=i(41034),r=(i(44114),i(93518)),o=function(){var t=this,e=t._self._c;return e("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:"/"}},[e("transition-group",{attrs:{name:"breadcrumb"}},t._l(t.levelList,function(i,s){return e("el-breadcrumb-item",{key:i.path},["noRedirect"===i.redirect||s===t.levelList.length-1?e("span",{staticClass:"no-redirect"},[t._v(t._s(i.meta.title))]):e("a",{on:{click:function(e){return e.preventDefault(),t.handleLink(i)}}},[t._v(t._s(i.meta.title))])])}),1)],1)},l=[];i(28706),i(2008),i(62010),i(18111),i(22489),i(26099),i(42762);const c={name:"Breadcrumb",data:function(){return{levelList:null}},watch:{$route:function(){this.getBreadcrumb()}},created:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){var t=this.$route.matched.filter(function(t){return t.meta&&t.meta.title}),e=t[0];this.isAdminHome(e)||(t=[{path:"/admin/dashboard",meta:{title:"首页"}}].concat(t)),this.levelList=t},isAdminHome:function(t){var e=t&&t.name;return!!e&&"Dashboard"===e.trim().toLocaleLowerCase()},handleLink:function(t){var e=t.path;this.$router.push(e)}}},u=c;var d=i(81656),m=(0,d.A)(u,o,l,!1,null,"1dc08710",null);const h=m.exports,p={name:"AdminDashboard",components:{Breadcrumb:h},data:function(){return{isCollapse:!1}},computed:(0,a.A)((0,a.A)({},(0,r.L8)(["user"])),{},{activeMenu:function(){return this.$route.path},nickname:function(){return this.user?this.user.nickname||this.user.username:""},userAvatar:function(){return this.user&&this.user.avatar?this.user.avatar:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}}),created:function(){this.checkAdminPermission()},methods:(0,a.A)((0,a.A)({},(0,r.i0)(["logout"])),{},{checkAdminPermission:function(){if(console.log("Dashboard checking admin permission, user:",this.user),console.log("User role:",this.user?this.user.role:"No user"),!this.user)return this.$message.error("请先登录"),void this.$router.push("/login");0!==this.user.role?(console.log("Not admin, role is:",this.user.role),this.$message.error("您没有管理员权限"),this.$router.push("/")):console.log("Admin permission verified")},toggleSidebar:function(){this.isCollapse=!this.isCollapse},goToProfile:function(){this.$router.push("/user/profile")},handleLogout:function(){var t=this;this.$confirm("确认退出登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.logout(),t.$router.push("/login"),t.$message.success("退出登录成功")})["catch"](function(){})}})},v=p;var f=(0,d.A)(v,s,n,!1,null,"77e25e42",null);const g=f.exports}}]);
//# sourceMappingURL=264.002d091e.js.map