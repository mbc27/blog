{"version":3,"file":"js/458.11b21f8d.js","mappings":"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","sources":["webpack://blog-frontend/./src/views/UserProfile.vue","webpack://blog-frontend/src/views/UserProfile.vue","webpack://blog-frontend/./src/views/UserProfile.vue?c182","webpack://blog-frontend/./src/views/UserProfile.vue?95c2"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user-profile-container\"},[_c('el-card',{staticClass:\"profile-card\"},[_c('div',{staticClass:\"header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"个人信息\")])]),_c('el-form',{ref:\"userForm\",attrs:{\"model\":_vm.userForm,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userForm.username),callback:function ($$v) {_vm.$set(_vm.userForm, \"username\", $$v)},expression:\"userForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"昵称\",\"prop\":\"nickname\"}},[_c('el-input',{model:{value:(_vm.userForm.nickname),callback:function ($$v) {_vm.$set(_vm.userForm, \"nickname\", $$v)},expression:\"userForm.nickname\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.userForm.email),callback:function ($$v) {_vm.$set(_vm.userForm, \"email\", $$v)},expression:\"userForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机号\",\"prop\":\"phone\"}},[_c('el-input',{model:{value:(_vm.userForm.phone),callback:function ($$v) {_vm.$set(_vm.userForm, \"phone\", $$v)},expression:\"userForm.phone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"头像\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"/api/upload\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.userForm.avatar)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.userForm.avatar}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.updateProfile}},[_vm._v(\"保存修改\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user-profile-container\">\n    <el-card class=\"profile-card\">\n      <div slot=\"header\" class=\"header\">\n        <span>个人信息</span>\n      </div>\n      <el-form :model=\"userForm\" :rules=\"rules\" ref=\"userForm\" label-width=\"80px\">\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"userForm.username\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"昵称\" prop=\"nickname\">\n          <el-input v-model=\"userForm.nickname\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input v-model=\"userForm.email\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"手机号\" prop=\"phone\">\n          <el-input v-model=\"userForm.phone\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"头像\">\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"/api/upload\"\n            :show-file-list=\"false\"\n            :on-success=\"handleAvatarSuccess\"\n            :before-upload=\"beforeAvatarUpload\">\n            <img v-if=\"userForm.avatar\" :src=\"userForm.avatar\" class=\"avatar\">\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"updateProfile\" :loading=\"loading\">保存修改</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n  name: 'UserProfile',\n  data() {\n    return {\n      loading: false,\n      userForm: {\n        id: '',\n        username: '',\n        nickname: '',\n        email: '',\n        phone: '',\n        avatar: ''\n      },\n      rules: {\n        nickname: [\n          { required: true, message: '请输入昵称', trigger: 'blur' },\n          { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\n        ],\n        email: [\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\n          { type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur' }\n        ],\n        phone: [\n          { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号码', trigger: 'blur' }\n        ]\n      }\n    };\n  },\n  computed: {\n    ...mapGetters(['user'])\n  },\n  created() {\n    this.getUserInfo();\n  },\n  methods: {\n    ...mapActions(['updateUserInfo']),\n    \n    // 获取用户信息\n    async getUserInfo() {\n      try {\n        // 如果store中已有用户信息，直接使用\n        if (this.user) {\n          this.userForm = { ...this.user };\n        } else {\n          // 否则从API获取\n          const response = await this.$axios.get('/api/user/info');\n          if (response.data.code === 200) {\n            this.userForm = response.data.data;\n          }\n        }\n      } catch (error) {\n        this.$message.error('获取用户信息失败');\n      }\n    },\n    \n    // 更新个人信息\n    updateProfile() {\n      this.$refs.userForm.validate(async valid => {\n        if (valid) {\n          this.loading = true;\n          try {\n            await this.updateUserInfo(this.userForm);\n            this.$message.success('个人信息更新成功');\n          } catch (error) {\n            this.$message.error(error.message || '更新失败');\n          } finally {\n            this.loading = false;\n          }\n        }\n      });\n    },\n    \n    // 头像上传成功回调\n    handleAvatarSuccess(res) {\n      if (res.code === 200) {\n        this.userForm.avatar = res.data;\n      } else {\n        this.$message.error('上传失败');\n      }\n    },\n    \n    // 头像上传前的验证\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 或 PNG 格式!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isJPG && isLt2M;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.user-profile-container {\n  padding: 20px;\n}\n\n.profile-card {\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.header {\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n}\n\n.avatar {\n  width: 100px;\n  height: 100px;\n  display: block;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserProfile.vue?vue&type=template&id=f84f1008&scoped=true\"\nimport script from \"./UserProfile.vue?vue&type=script&lang=js\"\nexport * from \"./UserProfile.vue?vue&type=script&lang=js\"\nimport style0 from \"./UserProfile.vue?vue&type=style&index=0&id=f84f1008&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f84f1008\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","ref","userForm","rules","model","value","username","callback","$$v","$set","expression","nickname","email","phone","handleAvatarSuccess","beforeAvatarUpload","avatar","loading","on","updateProfile","staticRenderFns","name","data","id","required","message","trigger","min","max","type","pattern","computed","_objectSpread","mapGetters","created","getUserInfo","methods","mapActions","_this","_asyncToGenerator","_regenerator","m","_callee","response","w","_context","p","n","user","$axios","get","v","code","$message","error","a","_this2","$refs","validate","_ref","_callee2","valid","_t2","_context2","updateUserInfo","success","f","_x","apply","arguments","res","file","isJPG","isLt2M","size","component"],"sourceRoot":""}