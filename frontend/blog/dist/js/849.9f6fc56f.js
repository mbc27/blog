"use strict";(self["webpackChunkblog_frontend"]=self["webpackChunkblog_frontend"]||[]).push([[849],{8849:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"system-setting"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("系统设置")])]),t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"settingsForm",attrs:{model:e.settings,rules:e.rules,"label-width":"120px"}},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("网站基本信息")]),t("el-form-item",{attrs:{label:"网站标题",prop:"siteTitle"}},[t("el-input",{attrs:{placeholder:"请输入网站标题"},model:{value:e.settings.siteTitle,callback:function(t){e.$set(e.settings,"siteTitle",t)},expression:"settings.siteTitle"}})],1),t("el-form-item",{attrs:{label:"网站描述",prop:"siteDescription"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入网站描述"},model:{value:e.settings.siteDescription,callback:function(t){e.$set(e.settings,"siteDescription",t)},expression:"settings.siteDescription"}})],1),t("el-form-item",{attrs:{label:"网站关键词",prop:"siteKeywords"}},[t("el-input",{attrs:{placeholder:"请输入网站关键词，用逗号分隔"},model:{value:e.settings.siteKeywords,callback:function(t){e.$set(e.settings,"siteKeywords",t)},expression:"settings.siteKeywords"}})],1),t("el-form-item",{attrs:{label:"网站作者",prop:"siteAuthor"}},[t("el-input",{attrs:{placeholder:"请输入网站作者"},model:{value:e.settings.siteAuthor,callback:function(t){e.$set(e.settings,"siteAuthor",t)},expression:"settings.siteAuthor"}})],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("邮箱设置")]),t("el-form-item",{attrs:{label:"邮箱服务器",prop:"emailHost"}},[t("el-input",{attrs:{placeholder:"如：smtp.qq.com"},model:{value:e.settings.emailHost,callback:function(t){e.$set(e.settings,"emailHost",t)},expression:"settings.emailHost"}})],1),t("el-form-item",{attrs:{label:"邮箱端口",prop:"emailPort"}},[t("el-input-number",{attrs:{min:1,max:65535},model:{value:e.settings.emailPort,callback:function(t){e.$set(e.settings,"emailPort",t)},expression:"settings.emailPort"}})],1),t("el-form-item",{attrs:{label:"邮箱用户名",prop:"emailUsername"}},[t("el-input",{attrs:{placeholder:"请输入邮箱用户名"},model:{value:e.settings.emailUsername,callback:function(t){e.$set(e.settings,"emailUsername",t)},expression:"settings.emailUsername"}})],1),t("el-form-item",{attrs:{label:"邮箱密码",prop:"emailPassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入邮箱密码","show-password":""},model:{value:e.settings.emailPassword,callback:function(t){e.$set(e.settings,"emailPassword",t)},expression:"settings.emailPassword"}})],1),t("el-form-item",{attrs:{label:"发件人邮箱",prop:"emailFrom"}},[t("el-input",{attrs:{placeholder:"请输入发件人邮箱"},model:{value:e.settings.emailFrom,callback:function(t){e.$set(e.settings,"emailFrom",t)},expression:"settings.emailFrom"}})],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("功能设置")]),t("el-form-item",{attrs:{label:"评论审核"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"开启","inactive-text":"关闭"},model:{value:e.settings.commentAudit,callback:function(t){e.$set(e.settings,"commentAudit",t)},expression:"settings.commentAudit"}})],1),t("el-form-item",{attrs:{label:"用户注册"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"开启","inactive-text":"关闭"},model:{value:e.settings.userRegister,callback:function(t){e.$set(e.settings,"userRegister",t)},expression:"settings.userRegister"}})],1),t("el-form-item",{attrs:{label:"每页文章数",prop:"articlesPerPage"}},[t("el-input-number",{attrs:{min:1,max:100},model:{value:e.settings.articlesPerPage,callback:function(t){e.$set(e.settings,"articlesPerPage",t)},expression:"settings.articlesPerPage"}})],1),t("el-form-item",{attrs:{label:"每页评论数",prop:"commentsPerPage"}},[t("el-input-number",{attrs:{min:1,max:100},model:{value:e.settings.commentsPerPage,callback:function(t){e.$set(e.settings,"commentsPerPage",t)},expression:"settings.commentsPerPage"}})],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("关于页面设置")]),t("el-form-item",{attrs:{label:"博客介绍",prop:"aboutBlogIntro"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入博客介绍内容"},model:{value:e.settings.aboutBlogIntro,callback:function(t){e.$set(e.settings,"aboutBlogIntro",t)},expression:"settings.aboutBlogIntro"}})],1),t("el-form-item",{attrs:{label:"技术栈",prop:"aboutTechStack"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入技术栈内容"},model:{value:e.settings.aboutTechStack,callback:function(t){e.$set(e.settings,"aboutTechStack",t)},expression:"settings.aboutTechStack"}})],1),t("el-form-item",{attrs:{label:"关于作者",prop:"aboutAuthor"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入关于作者的内容"},model:{value:e.settings.aboutAuthor,callback:function(t){e.$set(e.settings,"aboutAuthor",t)},expression:"settings.aboutAuthor"}})],1),t("el-form-item",{attrs:{label:"联系方式",prop:"aboutContact"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入联系方式内容"},model:{value:e.settings.aboutContact,callback:function(t){e.$set(e.settings,"aboutContact",t)},expression:"settings.aboutContact"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.saveSettings}},[t("i",{staticClass:"el-icon-check"}),e._v(" 保存设置 ")]),t("el-button",{on:{click:e.resetForm}},[t("i",{staticClass:"el-icon-refresh"}),e._v(" 重置 ")])],1)],1)],1)],1)},a=[],o=(s(76918),s(23288),s(26099),s(58940),s(38781),s(31552));const r={name:"SystemSetting",data:function(){return{loading:!1,settings:{siteTitle:"",siteDescription:"",siteKeywords:"",siteAuthor:"",siteLogo:"",siteFavicon:"",emailHost:"",emailPort:587,emailUsername:"",emailPassword:"",emailFrom:"",commentAudit:1,userRegister:1,articlesPerPage:10,commentsPerPage:10,aboutBlogIntro:"",aboutTechStack:"",aboutAuthor:"",aboutContact:""},rules:{siteTitle:[{required:!0,message:"请输入网站标题",trigger:"blur"}],siteDescription:[{required:!0,message:"请输入网站描述",trigger:"blur"}],articlesPerPage:[{required:!0,message:"请输入每页文章数",trigger:"blur"},{type:"number",min:1,max:100,message:"每页文章数必须在1-100之间",trigger:"blur"}],commentsPerPage:[{required:!0,message:"请输入每页评论数",trigger:"blur"},{type:"number",min:1,max:100,message:"每页评论数必须在1-100之间",trigger:"blur"}]}}},created:function(){this.fetchSettings()},methods:{fetchSettings:function(){var e=this;this.loading=!0,o.A.system.getSettings().then(function(t){if(t&&200===t.code){var s=t.data||{};e.settings={siteTitle:s.site_title||"",siteDescription:s.site_description||"",siteKeywords:s.site_keywords||"",siteAuthor:s.site_author||"",siteLogo:s.site_logo||"",siteFavicon:s.site_favicon||"",emailHost:s.email_host||"",emailPort:parseInt(s.email_port)||587,emailUsername:s.email_username||"",emailPassword:s.email_password||"",emailFrom:s.email_from||"",commentAudit:parseInt(s.comment_audit)||1,userRegister:parseInt(s.user_register)||1,articlesPerPage:parseInt(s.articles_per_page)||10,commentsPerPage:parseInt(s.comments_per_page)||10,aboutBlogIntro:s.about_blog_intro||"这是一个基于Vue2和SpringBoot的个人博客系统，具有文章，表白墙，图片墙，收藏夹，音乐播放，视频播放，留言，友链，后台管理等功能。",aboutTechStack:s.about_tech_stack||"本网站采用前后端分离进行实现，前端使用Vue2和Element UI，后端使用Java SpringBoot和MySQL。",aboutAuthor:s.about_author||"热爱编程，喜欢分享技术知识和生活感悟。希望通过这个博客平台与大家交流学习，共同进步。",aboutContact:s.about_contact||"如果您有任何问题或建议，欢迎通过留言板与我联系，我会尽快回复。"}}else e.$message.error(t.message||"获取设置失败")})["catch"](function(t){console.error("获取设置失败",t),e.$message.error("获取设置失败")})["finally"](function(){e.loading=!1})},saveSettings:function(){var e=this;this.$refs.settingsForm.validate(function(t){if(t){e.loading=!0;var s={site_title:e.settings.siteTitle,site_description:e.settings.siteDescription,site_keywords:e.settings.siteKeywords,site_author:e.settings.siteAuthor,site_logo:e.settings.siteLogo,site_favicon:e.settings.siteFavicon,email_host:e.settings.emailHost,email_port:e.settings.emailPort.toString(),email_username:e.settings.emailUsername,email_password:e.settings.emailPassword,email_from:e.settings.emailFrom,comment_audit:e.settings.commentAudit.toString(),user_register:e.settings.userRegister.toString(),articles_per_page:e.settings.articlesPerPage.toString(),comments_per_page:e.settings.commentsPerPage.toString(),about_blog_intro:e.settings.aboutBlogIntro,about_tech_stack:e.settings.aboutTechStack,about_author:e.settings.aboutAuthor,about_contact:e.settings.aboutContact};o.A.system.updateSettings(s).then(function(t){t&&200===t.code?e.$message.success("保存设置成功"):e.$message.error(t.message||"保存设置失败")})["catch"](function(t){console.error("保存设置失败",t),e.$message.error("保存设置失败")})["finally"](function(){e.loading=!1})}else e.loading=!1})},resetForm:function(){this.$refs.settingsForm.resetFields(),this.fetchSettings()}}},n=r;var l=s(81656),c=(0,l.A)(n,i,a,!1,null,"4bd05af6",null);const m=c.exports}}]);
//# sourceMappingURL=849.9f6fc56f.js.map